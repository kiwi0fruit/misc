# Kiwi0Fruit's translit

## Yet another Russian to Latin translit

Придумал в качестве развлечения ещё один транслит. Развлечением было удовлетворить ограничениям:

* Транслит - полностью обратимый (является кодировкой без потерь и позволяет точно восстановить произвольный русский текст из латиницы),
* Транслит содержит только буквы и нижнее подчёркивание (в частности, не использует апостроф): отображение из русских букв `[А-Яа-я_]` в английские `[A-Za-z_]`,
* Не содержит далёких фонетических замен типа щ → w. Желательно, чтобы "звучало" похоже на английский, латинский или немецкий.


## Итоговый результат кратко

### 1. Очевидные замены

(19/19)

|_|а|б|в|г|д|з|и|к|л|м|н|о|п|р|с|т|у|ф|
|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|
|_|a|b|v|g|d|z|i|k|l|m|n|o|p|r|s|t|u|f|

### 2. Не очевидные замены

(+15/+5)

|   е   |  ё  | ж | й  | х  |ц| ч | ш | щ |    ъ   | ы  |   ь   | э |  ю  |  я  |
|:-----:|:---:|:-:|:--:|:--:|-|:-:|:-:|:-:|:------:|:--:|:-----:|:-:|:---:|:---:|
|e/ye/je|yo/jo|zh |ј/jh|h/kh|c|ch |sh |shh|j/\_h\_ |y/yh|j/\_j\_|eh |yu/ju|ya/ja|

Сочетания:

|   е   |  ё  | ж | й  | х  |ц| ч | ш | щ |    ъ   | ы  |   ь   |[^аяеэёоиыую_йъь]ъ[еёяю]|ы[эоауиы]|ы[еёяю] | эх  | кх  |
|:-----:|:---:|:-:|:--:|:--:|-|:-:|:-:|:-:|:------:|:--:|:-----:|:----------------------:|:-------:|:------:|:---:|:---:|
|e/ye/je|yo/jo|zh |ј/jh|h/kh|c|ch |sh |shh|jj/\_h\_|y/yh|j/\_j\_|      [...]j[eoau]      | yh[...] |yj[eoau]| ehh | khh |

### 3. Лишние буквы

(+0/+3)

| | | |
|-|-|-|
|q|w|x|

### 4. TODO

Нужно написать кодировщик и декодировщик на питоне, а потом проверить на каком-нибудь словаре, а так же на случайно-сгенерированных словах.


## Подробный алгоритм кодировки

### 1. ГОСТ 16876-71

Для 30 букв кодировка совпадает с [ISO/R 9 (1968), ГОСТ 16876-71, СТ СЭВ 1362-78, ООН (1987), таблица 2](https://ru.wikipedia.org/wiki/%D0%A2%D1%80%D0%B0%D0%BD%D1%81%D0%BB%D0%B8%D1%82%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D1%8F_%D1%80%D1%83%D1%81%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%B0%D0%BB%D1%84%D0%B0%D0%B2%D0%B8%D1%82%D0%B0_%D0%BB%D0%B0%D1%82%D0%B8%D0%BD%D0%B8%D1%86%D0%B5%D0%B9#%D0%A1%D1%80%D0%B0%D0%B2%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC_%D1%82%D1%80%D0%B0%D0%BD%D1%81%D0%BB%D0%B8%D1%82%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%B8):

|_|а|б|в|г|д|е|з|и|к|л|м|н|о|п|р|с|т|у|ф|
|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|
|_|a|b|v|g|d|e|z|i|k|l|m|n|o|p|r|s|t|u|f|

| Буква | ГОСТ 16876-71 | Примеры                             |
|:-----:|:-------------:|:----------------------------------- |
|   ё   |      jo       | jomko/ёмко                          |
|   ж   |      zh       | jozh/ёж                             |
|   ц   |       c       | civilizacija/цивилизация            |
|   ч   |      ch       | chernysh/черныш, schjotnaja/счётная |
|   ш   |      sh       | shlem/шлем                          |
|   щ   |      shh      | shhjotka/щётка                      |
|   ы   |       y       | kryska/крыска                       |
|   э   |      eh       | ehkran/экран                        |
|   ю   |      ju       | Julja/Юля                           |
|   я   |      ja       | Izja/Изя                            |


### 2. Хак от Kiwi0Fruit

Остальные 4 пришлось придумать:

| Буква | Kiwi0Fruit's | Было в ГОСТ 16876-71 |
|:-----:|:------------ |:-------------------- |
|   й   | j / јh       | jj                   |
|   х   | h / kh       | kh                   |
|   ъ   | jj / \_h\_   | ″                    |
|   ь   | j / \_j\_    | ′                    |
|       |              |                      |
|  эх   | ehh          |                      |
|  кх   | khh          |                      |

Когда составлял правила хотелось:

* чтобы h означала х в контекстах, где её нельзя перепутать с составными буквами, иначе – kh,
* чтобы j после согласных означала ь, а j в начале или после гласных - й,
* чтобы ъ в разрешённых русским языком местах кодировалась jj,
* для этого нужно помнить про ja, jo, ju и ввести контекстно-независимые jh, \_h\_, \_j\_.

Формальные правила:

| Формальное правило (regex)                      | Замена | Приоритет |
|:----------------------------------------------- |:------:|:--------- |
| **Й**                                           |        |           |
| •  `й[айоу]`                                    |   jh   | 1         |
| •  <code>(^\|[_ъь])й([_ъь]\|\$)</code>          |   jh   | 2         |
| •  `[^аяеэёоиыую_ъь]й`                          |   jh   | 3         |
| •  `й`                                          |   j    | 4         |
| **Х**                                           |        |           |
| •  <code>(^\|[_ъь])х([_ъь]\|$)</code>           |   kh   | 1         |
| •  `[зсхцчжшщьей]х`                             |   kh   | 2         |
| •  `кх`                                         |   hh   | 3         |
| •  `х`                                          |   h    | 4         |
| **Ъ**                                           |        |           |
| •  `[^аяеэёоиыую_йъь]ъ[еёюя]`                   |   jj   | 1         |
| •  `ъ`                                          | \_h\_  | 2         |
| **Ь**                                           |        |           |
| •  <code>[^аяеэёоиыую_йъь]ь([^айоу]\|\$)</code> |   j    | 1         |
| •  `ь`                                          | \_j\_  | 2         |

Данные регулярные выражения даны лишь в качестве задания формальных правил кодирования. В них предполагается, что все символы из [А-Яа-я_].

Формальные правила на естественном языке:

* [ й ] [ ј / jh ]
    * й перед [айоу] → jh (приоритет)
    * й может превратиться в \_j\_ за счёт того, что она первая/последняя в слове или перед/после [ъь] → jh (приоритет)
    * й после согласной → jh
    * й в остальных случаях → j
* [ х ] [ h / kh ]
    * х может превратиться в \_h\_ за счёт того, что она первая/последняя в слове или перед/после [ъь] → kh (приоритет)
    * х после [зсхцчжшщьей] → kh (приоритет)
    * х после к → hh (приоритет), обратно: khh → кх
    * х в остальных случаях → h
    * *важный частный случай*: эх → ehh, обратно: ehh → эх
* [ ъ ] [ jj / \_h\_ ]
    * ъ после согласной (но не й) и перед [еёюя] → jj
    * ъ в остальных случаях → \_h\_
* [ ь ] [ j / \_j\_ ]
    * ь перед [айоу] → \_j\_ (приоритет)
    * ь после согласной (но не й) → j
    * ь в остальных случаях → \_j\_

Примеры:

|             й             |           х            |                   ъ                    |                         ь                          |
|:-------------------------:|:----------------------:|:--------------------------------------:|:--------------------------------------------------:|
|          ј / jh           |         h / kh         |               jj / \_h\_               |                     j / \_j\_                      |
|         jhod/йод          | skhomjachitj/схомячить |     izjjjan/изъян, podjjjom/подъём     |                berechjsja/беречься                 |
|   belyj/белый, moj/мой    |   mekh/мех, mehr/мэр   |       objjekt/объект, on_h_/онъ        |             pjesa/пьеса, perjja/перья              |
|   jippi/йиппи, jes/йес    |    hoholok/хохолок     |  Chan_h_anj/Чанъань, chan_h_in/чанъин  |             konj/конь, pomoshhj/помощь             |
|  jjas/йяс, jh_h_ig/йъиг   |   ehho/эхо, ehon/эон   | Mu_h_minat/Муъминат, mur_h_min/муръмин | mur_j_jin/мурьйин, murjin/мурьин, murjkhin/мурьхин |
| arjhes/арйес, аrjhja/арйя |        khhe/кхе        |  mur_h_jin/муръйин, mur_h_hin/муръхин  |              \_j\_/ь, \_\_j\_\_/\_ь\_              |


## Подробный алгоритм декодировки

Я не проверял его даже мысленно. Но интуитивно чувствую, что он хорошо определён и реализуем. Собственно, алгоритм кодировки строился такой, чтобы не было такого, чтобы разные русские слова (любые) отображались в одну и ту же транслитерацию.
