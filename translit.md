# Kiwi0Fruit's translit

## Yet another Russian to Latin translit

Придумал в качестве развлечения ещё один транслит. Развлечением было удовлетворить ограничениям:

* Транслит - полностью обратимый (является кодировкой без потерь и позволяет точно восстановить произвольный русский текст из латиницы),
* Транслит содержит только буквы и нижнее подчёркивание (в частности, не использует апостроф): отображение из русских букв `[А-Яа-я_]` в английские `[A-Za-z_]`,
* Не содержит далёких фонетических замен типа щ → w. Желательно, чтобы "звучало" похоже на английский, латинский или немецкий.


## Итоговый результат

|  >  |         |  >  |     |  >  |     |
|:---:|:-------:|:---:|:---:|:---:|:---:|
|  е  | e/ye/je |  а  |  a  |  ф  |  f  |
|  ё  |  yo/jo  |  б  |  b  |  _  |  _  |
|  ж  |   zh    |  в  |  v  |     |  q  |
|  и  |  i/yi   |  г  |  g  |     |  w  |
|  й  |  ј/jh   |  д  |  d  |     |  x  |
|  х  | h/kh/hh |  з  |  z  |     |     |
|  ц  |    c    |  к  |  k  |     |     |
|  ч  |   ch    |  л  |  l  |     |     |
|  ш  |   sh    |  м  |  m  |     |     |
|  щ  |   shh   |  н  |  n  |     |     |
|  ъ  | j/\_h\_ |  о  |  o  |     |     |
|  ы  |  y/yhh  |  п  |  p  |     |     |
|  ь  | j/\_j\_ |  р  |  r  |     |     |
|  э  |   eh    |  с  |  s  |     |     |
|  ю  |  yu/ju  |  т  |  t  |     |     |
|  я  |  ya/ja  |  у  |  u  |     |     |

Подробнее про контекстные варианты:  
S - согласная.  
? - неоднозначное обратное восстановление.

|   >     |     |      >        |           |
|:------- |:---:|:------------- |:---------:|
| **е**   | e   | **й**         | j         |
| - (S)ье | jye | - (S)й        | jh        |
| - (S)ъе | je  | - й?          | jh        |
| - ые    | yje | | |
| **ё**   | yo  | **x**         | h         |
| - (S)ьё | jyo | - кх          | khh       |
| - (S)ъё | jo  | - эх          | ehh       |
| - ыё    | yjo | - х?          | kh        |
| **и**   | i   | **ъ**         | \_h\_     |
| - (S)ьи | jyi | - (S)ъ[еёюя]  | j[eoua]   |
| **ю**   | yu  | **ы**         | y         |
| - (S)ью | jyu | - ы[еёюя]     | yj[eoua]  |
| - (S)ъю | ju  | - ы?          | yhh       |
| - ыю    | yju | | |
| **я**   | ya  | **ь**         | \_j\_     |
| - (S)ья | jya | - (S)ь[еёюяи] | jy[eouai] |
| - (S)ъя | ja  | - (S)ь        | j         |
| - ыя    | yja | | |

Многие буквы совпадают с [ГОСТ 16876-71 табл. 2](https://ru.wikipedia.org/wiki/%D0%A2%D1%80%D0%B0%D0%BD%D1%81%D0%BB%D0%B8%D1%82%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D1%8F_%D1%80%D1%83%D1%81%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%B0%D0%BB%D1%84%D0%B0%D0%B2%D0%B8%D1%82%D0%B0_%D0%BB%D0%B0%D1%82%D0%B8%D0%BD%D0%B8%D1%86%D0%B5%D0%B9#%D0%A1%D1%80%D0%B0%D0%B2%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC_%D1%82%D1%80%D0%B0%D0%BD%D1%81%D0%BB%D0%B8%D1%82%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%B8) или [ГОСТ 7.79-2000 сист. Б](https://ru.wikipedia.org/wiki/%D0%A2%D1%80%D0%B0%D0%BD%D1%81%D0%BB%D0%B8%D1%82%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D1%8F_%D1%80%D1%83%D1%81%D1%81%D0%BA%D0%BE%D0%B3%D0%BE_%D0%B0%D0%BB%D1%84%D0%B0%D0%B2%D0%B8%D1%82%D0%B0_%D0%BB%D0%B0%D1%82%D0%B8%D0%BD%D0%B8%D1%86%D0%B5%D0%B9#%D0%A1%D1%80%D0%B0%D0%B2%D0%BD%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC_%D1%82%D1%80%D0%B0%D0%BD%D1%81%D0%BB%D0%B8%D1%82%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%B8).

Формальное определение контекста и сочетания букв:

| Контекст, Regex                                               |     Замена     |                                     Примеры                                      |
|:------------------------------------------------------------- |:--------------:|:--------------------------------------------------------------------------------:|
| **Й**                                                         |    **ј/jh**    |                                                                                  |
| 1. `([_ъь#])й([_ъь#])`                                        |   `(.)jh(.)`   |                                   йъог/jh_h_og                                   |
| 2. `([^аяеэёоиыую_ъь#])й`                                     |    `(.)jh`     |                подйес/podjhes, подйод/podjhod, мурьйин/mur_j_jin                 |
| 3. `(ы)й([еоау])`                                             |   `(y)jh(.)`   |                          белыйа/belyjha, белыйе/belyjhe                          |
| •  `й`                                                        |      `j`       | йод/jod, байес/bajes, белый/belyj, йиппи/jippi, байыс/bajys, байяс/bajyas, йй/jj |
|                                                               |                |                                                                                  |
| **Х**                                                         |  **h/kh/hh**   |                                                                                  |
| 1. `([_ъь#])х([_ъь#])`                                        |   `(.)kh(.)`   |                             хья/khjya, хьан/kh_j_an                              |
| 2. `([зсхцчжшщьей])х`                                         |    `(.)kh`     |                 сход/skhod, мех/mekh, мэр/mehr, мурьхин/murjkhin                 |
| 3. `(к)х`                                                     |    `(k)hh`     |                                     кхе/khhe                                     |
| •  `х`                                                        |      `h`       |                        хохолок/hoholok, mur_h_hin/муръхин                        |
| •  `(э)х`                                                     |    `(eh)h`     |                                эхо/ehho, эон/ehon                                |
|                                                               |                |                                                                                  |
| **Ъ**                                                         |  **j/\_h\_**   |                                                                                  |
| 1. `([^аяеэёоиыую_йъь#])ъ[еёюя]`                              |  `(.)j[eoua]`  |                            объект/objekt, изъян/izjan                            |
| •  `ъ`                                                        |     `_h_`      |                Муъминат/Mu_h_minat, Чанъань/Chan_h_anj, онъ/on_h_                |
|                                                               |                |                                                                                  |
| **Ы**                                                         |    **y/yhh**   |                                                                                  |
| 1. `ы([эоауи])`                                               |    `yhh(.)`    |                                  ыа/yhha, ыи/yhhi                                |
| 2. `ы[еёяю]`                                                  |   `yj[eoau]`   |                           белые/belyje, бедныя/bednyja                           |
| •  `ы`                                                        |      `y`       |                            крыска/kryska, ыпся/ypsya, пыхтел/pyhtel              |
|                                                               |                |                                                                                  |
| **Ь**                                                         |  **j/\_j\_**   |                                                                                  |
| 1. <code>([^аяеэёоиыую_йъь#])ь([^еёиюяйаэоыуъь]\|[_#])</code> |   `(.)j(.)`    |                  прячься/pryachjsya, мыться/mytjsya, конь/konj                   |
| 2. `([^аяеэёоиыую_йъь#])ь[еёиюя]`                             | `(.)jy[eoiua]` |                      пьеса/pjyesa, пьян/pjyan, ладьи/ladjyi                      |
| •  `ь`                                                        |     `_j_`      |                                 чаньол/chan_j_ol                                 |


Замены **Ъ**, **Ы**, **Ь**, описанные выше, влияют и на замены гласных:

|       |             |                                                                                                     |
|:----- |:-----------:|:---------------------------------------------------------------------------------------------------:|
| **Е** | **e/ye/je** | `e` – default,</br>`ye` замену смотри в **Ь** (2),</br>`je` замены смотри в **Ъ** (1) и в **Ы** (2) |
| **Ё** |  **yo/jo**  |                  `yo` – default,</br>`jo` замены смотри в **Ъ** (1) и в **Ы** (2)                   |
| **И** |  **i/yi**   |                          `i` – default,</br>`yi` замену смотри в **Ь** (2)                          |
| **Ю** |  **yu/ju**  |                  `yu` – default,</br>`ju` замены смотри в **Ъ** (1) и в **Ы** (2)                   |
| **Я** |  **ya/ja**  |                  `ya` – default,</br>`ja` замены смотри в **Ъ** (1) и в **Ы** (2)                   |

Данные регулярные выражения даны лишь в качестве задания формальных правил кодирования. Для удобства в них предполагается, что все символы из `[А-Яа-я_]` и дополнительно к этому строки начинаются и заканчиваются на `#`.

Когда составлял правила хотелось:

* чтобы h означала х в контекстах, где её нельзя перепутать с составными буквами, иначе – kh,
* чтобы j после согласных означала ь, а j первая или после гласных - й,
* чтобы ъe/ъя в разрешённых русским языком местах кодировались je/ja,
* чтобы ьe/ья в типичных местах кодировались jye/jya,
* для остальных случаев нужно ввести контекстно-независимые й/jh, ы/yh, ъ/\_h\_, ь/\_j\_.

Ещё примеры:

|     |         |                                     |
|:---:|:-------:|:----------------------------------- |
|  е  | e/ye/je | пена/pena, ель/elj                  |
|  ё  |  yo/jo  | ёмко/yomko, мёд/myod                |
|  ж  |   zh    | yozh/ёж                             |
|  и  |  i/yi   | миг/mig                             |
|  ц  |    c    | civilizacija/цивилизация            |
|  ч  |   ch    | chernysh/черныш, schyotnaya/счётная |
|  ш  |   sh    | shlem/шлем                          |
|  щ  |   shh   | shhyotka/щётка                      |
|  э  |   eh    | ehkran/экран                        |
|  ю  |  yu/ju  | Yulya/Юля                           |
|  я  |  ya/ja  | Izya/Изя                            |

### TO DO

Нужно написать кодировщик и декодировщик на питоне, а потом проверить на каком-нибудь словаре, а так же на случайно-сгенерированных словах.

Я не проверял алгоритм декодирования даже мысленно. Но интуитивно чувствую, что он хорошо определён и реализуем. Собственно, алгоритм кодировки строился такой, чтобы не было такого, чтобы разные русские слова (любые) отображались в одну и ту же транслитерацию.
